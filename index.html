<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MicroYield - USDT 50% in 30 Days</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Default theme (mixed) */
            --primary: #4e44ce;
            --primary-dark: #3a32a8;
            --primary-light: #6a62d8;
            --secondary: #35a2eb;
            --secondary-dark: #2d8ac7;
            --dark: #1a1a2e;
            --darker: #0f0f1a;
            --light: #f1f1f1;
            --lighter: #f8f9fa;
            --success: #28a745;
            --success-dark: #218838;
            --danger: #dc3545;
            --danger-dark: #c82333;
            --warning: #ffc107;
            --warning-dark: #e0a800;
            --info: #17a2b8;
            --border-radius: 8px;
            --box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            
            /* Background and text colors */
            --bg-color: var(--darker);
            --bg-secondary: var(--dark);
            --text-color: var(--light);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --card-bg: rgba(26, 26, 46, 0.8);
            --card-border: rgba(255, 255, 255, 0.05);
            --input-bg: rgba(15, 15, 26, 0.5);
            --input-border: rgba(255, 255, 255, 0.1);
        }
        
        /* Light theme */
        .theme-light {
            --bg-color: #f5f5f5;
            --bg-secondary: #ffffff;
            --text-color: #333333;
            --text-secondary: rgba(0, 0, 0, 0.7);
            --card-bg: rgba(255, 255, 255, 0.9);
            --card-border: rgba(0, 0, 0, 0.1);
            --input-bg: rgba(255, 255, 255, 0.8);
            --input-border: rgba(0, 0, 0, 0.1);
            
            /* Adjust particle colors for light theme */
            --particle-color: rgba(78, 68, 206, 0.2);
            --particle-line: rgba(78, 68, 206, 0.1);
        }
        
        /* Dark theme */
        .theme-dark {
            --bg-color: var(--darker);
            --bg-secondary: var(--dark);
            --text-color: var(--light);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --card-bg: rgba(26, 26, 46, 0.8);
            --card-border: rgba(255, 255, 255, 0.05);
            --input-bg: rgba(15, 15, 26, 0.5);
            --input-border: rgba(255, 255, 255, 0.1);
            
            /* Adjust particle colors for dark theme */
            --particle-color: #4e44ce;
            --particle-line: #4e44ce;
        }
        
        /* Mixed theme (default) - uses original root variables */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            transition: var(--transition);
        }

        /* Theme switcher */
        .theme-switcher {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            padding: 10px;
            border-radius: 50px;
            box-shadow: var(--box-shadow);
            border: 1px solid var(--card-border);
        }
        
        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            background: var(--bg-secondary);
            color: var(--text-color);
        }
        
        .theme-btn:hover {
            transform: scale(1.1);
        }
        
        .theme-btn.active {
            box-shadow: 0 0 0 3px var(--primary);
        }
        
        /* Animated Background Elements */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: linear-gradient(135deg, var(--bg-color) 0%, var(--bg-secondary) 100%);
        }

        /* Floating Circles Background */
        .circles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
            opacity: 0.3;
        }

        .circles li {
            position: absolute;
            display: block;
            list-style: none;
            width: 20px;
            height: 20px;
            background: var(--particle-color);
            animation: animate 25s linear infinite;
            bottom: -150px;
            border-radius: 50%;
        }

        .circles li:nth-child(1) {
            left: 25%;
            width: 80px;
            height: 80px;
            animation-delay: 0s;
        }

        .circles li:nth-child(2) {
            left: 10%;
            width: 20px;
            height: 20px;
            animation-delay: 2s;
            animation-duration: 12s;
        }

        .circles li:nth-child(3) {
            left: 70%;
            width: 20px;
            height: 20px;
            animation-delay: 4s;
        }

        .circles li:nth-child(4) {
            left: 40%;
            width: 60px;
            height: 60px;
            animation-delay: 0s;
            animation-duration: 18s;
        }

        .circles li:nth-child(5) {
            left: 65%;
            width: 20px;
            height: 20px;
            animation-delay: 0s;
        }

        .circles li:nth-child(6) {
            left: 75%;
            width: 110px;
            height: 110px;
            animation-delay: 3s;
        }

        .circles li:nth-child(7) {
            left: 35%;
            width: 150px;
            height: 150px;
            animation-delay: 7s;
        }

        .circles li:nth-child(8) {
            left: 50%;
            width: 25px;
            height: 25px;
            animation-delay: 15s;
            animation-duration: 45s;
        }

        .circles li:nth-child(9) {
            left: 20%;
            width: 15px;
            height: 15px;
            animation-delay: 2s;
            animation-duration: 35s;
        }

        .circles li:nth-child(10) {
            left: 85%;
            width: 150px;
            height: 150px;
            animation-delay: 0s;
            animation-duration: 11s;
        }

        @keyframes animate {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
                border-radius: 0;
            }

            100% {
                transform: translateY(-1000px) rotate(720deg);
                opacity: 0;
                border-radius: 50%;
            }
        }

        /* Glowing Border Effect */
        .glow-border {
            position: relative;
            box-shadow: 0 0 10px rgba(78, 68, 206, 0.5);
        }

        .glow-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            z-index: -1;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--primary));
            background-size: 400%;
            border-radius: var(--border-radius);
            opacity: 0;
            transition: 0.5s;
            animation: glowing 20s linear infinite;
        }

        .glow-border:hover::before {
            opacity: 0.7;
        }

        @keyframes glowing {
            0% {
                background-position: 0 0;
            }
            50% {
                background-position: 400% 0;
            }
            100% {
                background-position: 0 0;
            }
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid var(--input-border);
        }
        
        header h1 {
            color: var(--text-color);
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-shadow: 0 0 10px rgba(78, 68, 206, 0.5);
        }
        
        header p {
            color: var(--secondary);
            font-size: 1.1rem;
        }
        
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            margin-bottom: 30px;
            transition: var(--transition);
            border: 1px solid var(--card-border);
        }
        
        .card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            transform: translateY(-5px);
        }
        
        .card h2 {
            color: var(--text-color);
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card h2 i {
            font-size: 1.3rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--input-border);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
            background: var(--input-bg);
            color: var(--text-color);
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(78, 68, 206, 0.2);
            background: var(--input-bg);
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(78, 68, 206, 0.4);
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button:disabled {
            background-color: #333344;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background-color: var(--secondary);
        }
        
        .btn-secondary:hover {
            background-color: var(--secondary-dark);
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: var(--success-dark);
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        .btn-warning:hover {
            background-color: var(--warning-dark);
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: var(--danger-dark);
        }
        
        .btn-info {
            background-color: var(--info);
        }
        
        .btn-sm {
            padding: 8px 15px;
            font-size: 14px;
            width: auto;
        }
        
        .investment-details {
            background-color: var(--input-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 25px;
            border-left: 4px solid var(--primary);
        }
        
        .investment-details p {
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
        }
        
        .highlight {
            color: var(--primary-light);
            font-weight: 700;
        }
        
        .wallet-address {
            font-family: monospace;
            background-color: var(--input-bg);
            padding: 12px;
            border-radius: var(--border-radius);
            word-break: break-all;
            font-size: 14px;
            margin-top: 10px;
            color: var(--text-color);
        }
        
        #countdown {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-light);
            text-align: center;
            margin: 20px 0;
        }
        
        .active-investments {
            margin-top: 30px;
        }
        
        .investment-item {
            border-bottom: 1px solid var(--input-border);
            padding: 18px 0;
            transition: var(--transition);
        }
        
        .investment-item:hover {
            background-color: rgba(78, 68, 206, 0.1);
            padding-left: 10px;
            padding-right: 10px;
            margin-left: -10px;
            margin-right: -10px;
            border-radius: var(--border-radius);
        }
        
        .investment-item:last-child {
            border-bottom: none;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            overflow-x: auto;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 5px;
            border: 1px solid var(--card-border);
        }
        
        .tab {
            padding: 12px 15px;
            cursor: pointer;
            background-color: transparent;
            border: none;
            flex: 1;
            text-align: center;
            min-width: 120px;
            white-space: nowrap;
            font-weight: 600;
            color: var(--text-color);
            transition: var(--transition);
            border-radius: calc(var(--border-radius) - 5px);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .tab.active {
            background-color: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .auth-container {
            max-width: 500px;
            margin: 50px auto;
            animation: slideUp 0.5s ease;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--card-border);
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: -1px;
        }
        
        .auth-tab {
            padding: 15px 20px;
            background: var(--input-bg);
            border: 1px solid var(--input-border);
            border-bottom: none;
            cursor: pointer;
            flex: 1;
            text-align: center;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            font-weight: 600;
            transition: var(--transition);
            color: var(--text-color);
        }
        
        .auth-tab.active {
            background: var(--card-bg);
            border-bottom: 1px solid var(--card-bg);
            color: var(--primary-light);
        }
        
        .auth-content {
            background: var(--card-bg);
            padding: 30px;
            border: 1px solid var(--input-border);
            border-radius: 0 var(--border-radius) var(--border-radius) var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .form-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }
        
        .form-footer a {
            color: var(--primary-light);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .form-footer a:hover {
            text-decoration: underline;
            color: var(--primary);
        }
        
        .user-menu {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-email {
            margin-right: 5px;
            font-weight: 600;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logout-btn {
            background: var(--danger);
            padding: 8px 15px;
            width: auto;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .logout-btn:hover {
            background: var(--danger-dark);
        }
        
        .hidden {
            display: none !important;
        }
        
        .daily-earnings {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--info);
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background-color: rgba(23, 162, 184, 0.1);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--info);
        }
        
        .total-deposits {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-light);
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background-color: rgba(78, 68, 206, 0.1);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-light);
        }
        
        .payment-method {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid var(--input-border);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .payment-method:hover {
            border-color: var(--primary);
            background-color: rgba(78, 68, 206, 0.1);
        }
        
        .payment-method.active {
            border-color: var(--primary);
            background-color: rgba(78, 68, 206, 0.2);
        }
        
        .payment-method img {
            width: 40px;
            height: 40px;
            object-fit: contain;
            margin-right: 15px;
            border-radius: 5px;
        }
        
        .payment-details {
            flex-grow: 1;
        }
        
        .payment-details strong {
            display: block;
            margin-bottom: 5px;
            color: var(--text-color);
        }
        
        .payment-details p, .payment-details small {
            color: var(--text-secondary);
        }
        
        .payment-instructions {
            background-color: rgba(23, 162, 184, 0.1);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 20px;
            border-left: 4px solid var(--info);
        }
        
        .payment-instructions p {
            margin-bottom: 10px;
            color: var(--text-color);
        }
        
        .withdrawal-calculator {
            background-color: rgba(53, 162, 235, 0.1);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 20px;
            border-left: 4px solid var(--secondary);
        }
        
        .withdrawal-calculator p {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            color: var(--text-color);
        }
        
        .tax-notice {
            color: var(--danger);
            font-weight: 600;
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px dashed var(--input-border);
        }
        
        .transaction-history {
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid var(--input-border);
            align-items: center;
            transition: var(--transition);
        }
        
        .transaction-item:hover {
            background-color: rgba(78, 68, 206, 0.1);
            padding-left: 10px;
            padding-right: 10px;
            margin-left: -10px;
            margin-right: -10px;
            border-radius: var(--border-radius);
        }
        
        .transaction-amount {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .transaction-positive {
            color: var(--success);
        }
        
        .transaction-negative {
            color: var(--danger);
        }
        
        .transaction-pending {
            color: var(--warning);
        }
        
        .transaction-details {
            flex-grow: 1;
            margin-right: 15px;
        }
        
        .transaction-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-color);
        }
        
        .transaction-date {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .transaction-status {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 12px;
            background-color: rgba(255, 255, 255, 0.1);
            display: inline-block;
            margin-top: 5px;
        }
        
        .status-pending {
            background-color: rgba(255, 193, 7, 0.1);
            color: var(--warning);
        }
        
        .status-completed {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success);
        }
        
        .status-failed {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--danger);
        }
        
        .copy-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            padding: 5px 10px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 5px;
            color: var(--text-color);
        }
        
        .copy-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .qr-code {
            width: 150px;
            height: 150px;
            margin: 15px auto;
            background-color: white;
            padding: 10px;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--input-border);
        }
        
        .qr-code img {
            max-width: 100%;
            max-height: 100%;
        }
        
        .progress-container {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin: 15px 0;
            height: 10px;
        }
        
        .progress-bar {
            height: 100%;
            border-radius: 20px;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--card-border);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--text-color);
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .stat-primary {
            color: var(--primary);
            border-top: 4px solid var(--primary);
        }
        
        .stat-success {
            color: var(--success);
            border-top: 4px solid var(--success);
        }
        
        .stat-warning {
            color: var(--warning);
            border-top: 4px solid var(--warning);
        }
        
        .stat-info {
            color: var(--info);
            border-top: 4px solid var(--info);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--bg-secondary);
            color: var(--text-color);
            text-align: center;
            border-radius: var(--border-radius);
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: normal;
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--bg-secondary) transparent transparent transparent;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--success);
            color: white;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(200%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background-color: var(--danger);
        }
        
        .notification.warning {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        .notification i {
            font-size: 1.2rem;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .account-settings {
            margin-top: 30px;
        }
        
        .security-note {
            background-color: rgba(220, 53, 69, 0.1);
            border-left: 4px solid var(--danger);
            padding: 15px;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            margin: 20px 0;
            font-size: 0.9rem;
            color: var(--text-color);
        }
        
        .two-factor {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            margin: 20px 0;
        }
        
        .two-factor-info {
            flex-grow: 1;
        }
        
        .two-factor-status {
            font-weight: 600;
            color: var(--success);
        }
        
        .two-factor-status.disabled {
            color: var(--danger);
        }
        
        .withdraw-option {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid var(--input-border);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .withdraw-option:hover {
            border-color: var(--primary);
            background-color: rgba(78, 68, 206, 0.1);
        }
        
        .withdraw-option.active {
            border-color: var(--primary);
            background-color: rgba(78, 68, 206, 0.2);
        }
        
        .withdraw-option i {
            font-size: 1.5rem;
            margin-right: 15px;
            color: var(--primary);
        }
        
        .withdraw-option-details {
            flex-grow: 1;
        }
        
        .withdraw-option-details strong {
            display: block;
            margin-bottom: 5px;
            color: var(--text-color);
        }
        
        .withdraw-option-details p, .withdraw-option-details small {
            color: var(--text-secondary);
        }
        
        .exchange-rate-banner {
            background-color: rgba(53, 162, 235, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: var(--border-radius);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-color);
        }
        
        .exchange-rate-banner i {
            color: var(--secondary);
        }
        
        .currency-converter {
            background-color: rgba(78, 68, 206, 0.1);
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 15px 0;
            border-left: 4px solid var(--primary);
        }
        
        .currency-converter p {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            color: var(--text-color);
        }
        
        /* Product Investment Styles */
        .products-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .product-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            border: 2px solid transparent;
            text-align: center;
            cursor: pointer;
            border: 1px solid var(--card-border);
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .product-card.selected {
            border-color: var(--primary);
            background-color: rgba(78, 68, 206, 0.2);
        }
        
        .product-card h3 {
            color: var(--primary-light);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .product-price {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 15px 0;
            color: var(--success);
        }
        
        .product-term {
            color: var(--secondary);
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .product-return {
            background-color: rgba(78, 68, 206, 0.1);
            padding: 10px;
            border-radius: var(--border-radius);
            margin: 15px 0;
            font-weight: 600;
            color: var(--text-color);
        }
        
        .product-features {
            text-align: left;
            margin: 15px 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .product-features li {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .product-features i {
            color: var(--success);
        }
        
        /* Responsive styles */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .tab {
                padding: 10px;
                min-width: 100px;
                font-size: 14px;
            }
            
            .user-menu {
                position: static;
                justify-content: flex-end;
                margin-bottom: 20px;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .auth-container {
                margin: 20px auto;
            }
            
            .auth-content {
                padding: 20px;
            }
            
            .products-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            header h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px 15px;
            }
            
            .tab {
                min-width: 80px;
                font-size: 12px;
                padding: 8px 5px;
            }
            
            .daily-earnings, .total-deposits {
                font-size: 1.2rem;
                padding: 10px;
            }
            
            .payment-method, .withdraw-option {
                flex-direction: column;
                text-align: center;
            }
            
            .payment-method img, .withdraw-option i {
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Switcher -->
    <div class="theme-switcher">
        <button class="theme-btn active" onclick="setTheme('mixed')" title="Mixed Theme">
            <i class="fas fa-adjust"></i>
        </button>
        <button class="theme-btn" onclick="setTheme('light')" title="Light Theme">
            <i class="fas fa-sun"></i>
        </button>
        <button class="theme-btn" onclick="setTheme('dark')" title="Dark Theme">
            <i class="fas fa-moon"></i>
        </button>
    </div>
    
    <!-- Animated Background Elements -->
    <div id="particles-js"></div>
    <ul class="circles">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    
    <div id="notification" class="notification hidden">
        <i class="fas fa-check-circle"></i>
        <span id="notification-message">Operation successful</span>
    </div>
    
    <div id="authSection" class="auth-container">
        <div class="auth-tabs">
            <div class="auth-tab active" onclick="switchAuthTab('login')">Login</div>
            <div class="auth-tab" onclick="switchAuthTab('register')">Register</div>
        </div>
        
        <div id="loginContent" class="auth-content">
            <h2><i class="fas fa-sign-in-alt"></i> Login to Your Account</h2>
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" placeholder="your@email.com">
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" placeholder="••••••••">
                <div class="form-footer" style="text-align: right; margin-top: 5px;">
                    <a href="#" onclick="showForgotPassword()">Forgot password?</a>
                </div>
            </div>
            <button onclick="login()" id="loginBtn">
                <span id="loginBtnText">Login</span>
                <span id="loginSpinner" class="hidden loading"></span>
            </button>
            <div class="form-footer">
                <p>Don't have an account? <a href="#" onclick="switchAuthTab('register')">Register</a></p>
            </div>
        </div>
        
        <div id="registerContent" class="auth-content" style="display: none;">
            <h2><i class="fas fa-user-plus"></i> Create New Account</h2>
            <div class="form-group">
                <label for="regEmail">Email</label>
                <input type="email" id="regEmail" placeholder="your@email.com">
            </div>
            <div class="form-group">
                <label for="regPassword">Password</label>
                <input type="password" id="regPassword" placeholder="••••••••">
                <small style="display: block; margin-top: 5px; color: var(--text-secondary);">Minimum 8 characters with at least 1 number</small>
            </div>
            <div class="form-group">
                <label for="regConfirmPassword">Confirm Password</label>
                <input type="password" id="regConfirmPassword" placeholder="••••••••">
            </div>
            <div class="form-group">
                <label for="regGCash">GCash Number (For withdrawals)</label>
                <input type="text" id="regGCash" placeholder="09xxxxxxxxx">
            </div>
            <div class="form-group">
                <input type="checkbox" id="regTerms" style="width: auto; display: inline-block; margin-right: 10px;">
                <label for="regTerms" style="display: inline-block; width: auto; font-weight: normal; color: var(--text-secondary);">I agree to the <a href="#" onclick="showTerms()">Terms & Conditions</a></label>
            </div>
            <button onclick="register()" id="registerBtn">
                <span id="registerBtnText">Register</span>
                <span id="registerSpinner" class="hidden loading"></span>
            </button>
            <div class="form-footer">
                <p>Already have an account? <a href="#" onclick="switchAuthTab('login')">Login</a></p>
            </div>
        </div>
        
        <div id="forgotContent" class="auth-content hidden">
            <h2><i class="fas fa-key"></i> Reset Password</h2>
            <div class="form-group">
                <label for="forgotEmail">Email</label>
                <input type="email" id="forgotEmail" placeholder="your@email.com">
            </div>
            <button onclick="sendResetPassword()" id="resetBtn">
                <span id="resetBtnText">Send Reset Link</span>
                <span id="resetSpinner" class="hidden loading"></span>
            </button>
            <div class="form-footer">
                <p>Remember your password? <a href="#" onclick="switchAuthTab('login')">Login</a></p>
            </div>
        </div>
    </div>
    
    <div id="appSection" class="container hidden">
        <div class="user-menu">
            <span class="user-email" id="userEmailDisplay">
                <i class="fas fa-user-circle"></i>
                <span id="userEmailText">user@example.com</span>
            </span>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span class="logout-text">Logout</span>
            </button>
        </div>
        
        <header>
            <h1>MicroYield</h1>
            <p>Earn 50% on your USDT in just 30 days</p>
        </header>
        
        <div class="stats-container">
            <div class="stat-card stat-primary">
                <div class="stat-label">Total Invested</div>
                <div class="stat-value" id="totalInvested">$0.00</div>
                <div class="stat-label">All Time</div>
            </div>
            <div class="stat-card stat-success">
                <div class="stat-label">Total Returns</div>
                <div class="stat-value" id="totalReturns">$0.00</div>
                <div class="stat-label">All Time</div>
            </div>
            <div class="stat-card stat-warning">
                <div class="stat-label">Active Investments</div>
                <div class="stat-value" id="activeCount">0</div>
                <div class="stat-label">Currently Running</div>
            </div>
            <div class="stat-card stat-info">
                <div class="stat-label">Daily Earnings</div>
                <div class="stat-value" id="dailyEarnings">$0.00</div>
                <div class="stat-label">Available</div>
            </div>
        </div>
        
        <div class="tab-container">
            <button class="tab active" onclick="openTab('invest')">
                <i class="fas fa-coins"></i>
                <span class="tab-text">Invest</span>
            </button>
            <button class="tab" onclick="openTab('wallet')">
                <i class="fas fa-wallet"></i>
                <span class="tab-text">Wallet</span>
            </button>
            <button class="tab" onclick="openTab('active')">
                <i class="fas fa-chart-line"></i>
                <span class="tab-text">Active</span>
            </button>
            <button class="tab" onclick="openTab('history')">
                <i class="fas fa-history"></i>
                <span class="tab-text">History</span>
            </button>
            <button class="tab" onclick="openTab('settings')">
                <i class="fas fa-cog"></i>
                <span class="tab-text">Settings</span>
            </button>
        </div>
        
        <div id="invest" class="tab-content active">
            <div class="card">
                <h2><i class="fas fa-coins"></i> Investment Products</h2>
                
                <div class="exchange-rate-banner">
                    <i class="fas fa-info-circle"></i>
                    <span>Fixed Exchange Rate: 1 USD = 50 PHP (Philippine Peso)</span>
                </div>
                
                <div class="products-container" id="investmentProducts">
                    <!-- Products will be added here by JavaScript -->
                </div>
                
                <div class="form-group">
                    <label>Selected Investment</label>
                    <div id="selectedProductDisplay" class="investment-details" style="display: none;">
                        <p><strong>Investment Details:</strong></p>
                        <p>Product: <span id="displayProductName" class="highlight">None selected</span></p>
                        <p>Amount: <span id="displayAmount" class="highlight">0.00</span> USDT (<span id="displayAmountPHP" class="highlight">₱0.00</span>)</p>
                        <p>Term: <span id="displayTerm" class="highlight">0 days</span></p>
                        <p>Return: <span id="displayReturn" class="highlight">0.00</span> USDT (<span id="displayReturnPHP" class="highlight">₱0.00</span>) - <span id="displayReturnPercent" class="highlight">0%</span></p>
                        <p>Daily Earnings: <span id="displayDailyEarnings" class="highlight">0.00</span> USDT (<span id="displayDailyEarningsPHP" class="highlight">₱0.00</span>)</p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Payment Method</label>
                    <div class="payment-method" onclick="selectPaymentMethod('crypto')" id="cryptoMethod">
                        <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" alt="USDT">
                        <div class="payment-details">
                            <strong>Crypto (USDT)</strong>
                            <p>Send to our wallet address</p>
                            <small>TRC20 network recommended</small>
                        </div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('gcash')" id="gcashMethod">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/GCash_logo.svg/1200px-GCash_logo.svg.png" alt="GCash">
                        <div class="payment-details">
                            <strong>GCash</strong>
                            <p>Send to our GCash account</p>
                            <small>Instant processing</small>
                        </div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('paypal')" id="paypalMethod">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a4/Paypal_2014_logo.png" alt="PayPal">
                        <div class="payment-details">
                            <strong>PayPal</strong>
                            <p>Send to our PayPal account</p>
                            <small>International payments</small>
                        </div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('bank')" id="bankMethod">
                        <img src="https://cdn-icons-png.flaticon.com/512/2553/2553369.png" alt="Bank Transfer">
                        <div class="payment-details">
                            <strong>Bank Transfer</strong>
                            <p>Direct bank deposit</p>
                            <small>1-3 business days</small>
                        </div>
                    </div>
                </div>
                
                <div class="form-group" id="cryptoPayment">
                    <label for="walletAddress">Your USDT Wallet Address (For returns)</label>
                    <input type="text" id="walletAddress" placeholder="0x... or T...">
                    <div class="security-note">
                        <i class="fas fa-shield-alt"></i> For security, we only send returns to wallet addresses you provide here.
                    </div>
                </div>
                
                <div class="form-group hidden" id="gcashPayment">
                    <label>GCash Payment Instructions</label>
                    <div class="payment-instructions">
                        <p>Send payment to:</p>
                        <p><strong>GCash Number:</strong> 09978014222</p>
                        <p><strong>Account Name:</strong> JE***D A.</p>
                        <p>Click the button below to open GCash and send payment:</p>
                        <button class="btn-success" onclick="openGCashApp()" id="gcashPayBtn">
                            <i class="fas fa-mobile-alt"></i>
                            <span>Pay with GCash</span>
                        </button>
                        <p style="margin-top: 15px;">After payment, upload your receipt below:</p>
                        <input type="file" id="gcashReceipt" accept="image/*">
                        <small style="display: block; margin-top: 5px; color: var(--text-secondary);">Make sure the transaction details are visible</small>
                    </div>
                </div>
                
                <div class="form-group hidden" id="paypalPayment">
                    <label>PayPal Payment Instructions</label>
                    <div class="payment-instructions">
                        <p>Send payment to:</p>
                        <p><strong>PayPal Email:</strong> investment772004@gmail.com</p>
                        <p>After payment, upload your receipt below:</p>
                        <input type="file" id="paypalReceipt" accept="image/*">
                        <small style="display: block; margin-top: 5px; color: var(--text-secondary);">Include transaction ID in notes</small>
                    </div>
                </div>
                
                <div class="form-group hidden" id="bankPayment">
                    <label>Bank Transfer Instructions</label>
                    <div class="payment-instructions">
                        <p>Send payment to:</p>
                        <p><strong>Bank Name:</strong> GCASH
                        <p><strong>Account Name:</strong> JE***D A.</p>
                        <p><strong>Account Number:</strong> 09978014222</p>
                        <p>After payment, upload your receipt below:</p>
                        <input type="file" id="bankReceipt" accept="image/*">
                        <small style="display: block; margin-top: 5px; color: var(--text-secondary);">Include reference number</small>
                    </div>
                </div>
                
                <button onclick="createInvestment()" id="investBtn" disabled>
                    <i class="fas fa-lock"></i>
                    <span id="investBtnText">Select a product to invest</span>
                    <span id="investSpinner" class="hidden loading"></span>
                </button>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-qrcode"></i> USDT Deposit Address</h2>
                <p>Send USDT to this address for investments:</p>
                <div class="wallet-address" id="depositAddress">
                    0x18a0174aa92B0aF6e5c10c684445C4c8Bdfe88E2
                    <button class="copy-btn" onclick="copyToClipboard('depositAddress')">
                        <i class="far fa-copy"></i> Copy
                    </button>
                </div>
                <div class="qr-code">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=0x18a0174aa92B0aF6e5c10c684445C4c8Bdfe88E2" alt="QR Code">
                </div>
                <p style="text-align: center; font-size: 0.9rem; color: var(--text-secondary);">
                    <i class="fas fa-sync-alt"></i> Address refreshes every 24 hours for security
                </p>
            </div>
        </div>
        
        <div id="wallet" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-wallet"></i> My Wallet</h2>
                
                <div class="exchange-rate-banner">
                    <i class="fas fa-info-circle"></i>
                    <span>Fixed Exchange Rate: 1 USD = 50 PHP (Philippine Peso)</span>
                </div>
                
                <div class="daily-earnings">
                    Daily Earnings: <span id="dailyEarningsAmount">0.00</span> USDT (<span id="dailyEarningsAmountPHP">₱0.00</span>)
                    <small style="display: block; font-size: 0.9rem; margin-top: 5px; color: var(--text-secondary);">Accumulated from active investments</small>
                </div>
                
                <div class="total-deposits">
                    Total Deposits: <span id="totalDeposits">0.00</span> USDT (<span id="totalDepositsPHP">₱0.00</span>)
                    <small style="display: block; font-size: 0.9rem; margin-top: 5px; color: var(--text-secondary);">All your deposited funds</small>
                </div>
                
                <div class="form-group">
                    <label for="withdrawAmount">Withdrawal Amount (USDT)</label>
                    <input type="number" id="withdrawAmount" min="1" step="0.01" placeholder="1.00">
                    <small style="color: var(--text-secondary);">Minimum: $1.00 (₱50) | Available: <span id="availableBalance">0.00</span> USDT (<span id="availableBalancePHP">₱0.00</span>)</small>
                </div>
                
                <div class="withdrawal-calculator">
                    <p>You will receive: <span id="withdrawReceive">0.85</span> USDT (<span id="withdrawReceivePHP">₱42.50</span>)</p>
                    <p>Tax (15%): <span id="withdrawTax">0.15</span> USDT (<span id="withdrawTaxPHP">₱7.50</span>)</p>
                    <p class="tax-notice">15% tax fee applies to all withdrawals</p>
                </div>
                
                <div class="form-group">
                    <label>Withdrawal Method</label>
                    <div class="withdraw-option" onclick="selectWithdrawMethod('internal')" id="internalWithdraw">
                        <i class="fas fa-wallet"></i>
                        <div class="withdraw-option-details">
                            <strong>Internal Wallet</strong>
                            <p>Transfer to another MicroYield user</p>
                            <small>Instant processing, with tax fees</small>
                        </div>
                    </div>
                    <div class="withdraw-option" onclick="selectWithdrawMethod('gcash')" id="gcashWithdraw">
                        <i class="fas fa-mobile-alt"></i>
                        <div class="withdraw-option-details">
                            <strong>GCash</strong>
                            <p>Withdraw to your GCash account</p>
                            <small>1-2 hours processing</small>
                        </div>
                    </div>
                    <div class="withdraw-option" onclick="selectWithdrawMethod('crypto')" id="cryptoWithdraw">
                        <i class="fab fa-bitcoin"></i>
                        <div class="withdraw-option-details">
                            <strong>Crypto Wallet</strong>
                            <p>Withdraw to external crypto wallet</p>
                            <small>USDT (TRC20 recommended)</small>
                        </div>
                    </div>
                    <div class="withdraw-option" onclick="selectWithdrawMethod('bank')" id="bankWithdraw">
                        <i class="fas fa-university"></i>
                        <div class="withdraw-option-details">
                            <strong>Bank Transfer</strong>
                            <p>Withdraw to your bank account</p>
                            <small>1-3 business days</small>
                        </div>
                    </div>
                </div>
                
                <div class="form-group hidden" id="internalWithdrawDetails">
                    <label for="internalWalletEmail">Recipient's Email</label>
                    <input type="email" id="internalWalletEmail" placeholder="recipient@email.com">
                    <small style="color: var(--text-secondary);">Enter the email of the MicroYield user you're sending to</small>
                </div>
                
                <div class="form-group hidden" id="gcashWithdrawDetails">
                    <label>Your GCash Number</label>
                    <input type="text" id="gcashWithdrawNumber" placeholder="09xxxxxxxxx" value="">
                    <small style="color: var(--text-secondary);">Make sure this matches your registered GCash number</small>
                </div>
                
                <div class="form-group hidden" id="cryptoWithdrawDetails">
                    <label for="cryptoWalletAddress">Your Crypto Wallet Address</label>
                    <input type="text" id="cryptoWalletAddress" placeholder="0x... or T...">
                    <small style="color: var(--text-secondary);">Double-check the address before submitting</small>
                </div>
                
                <div class="form-group hidden" id="bankWithdrawDetails">
                    <label for="bankAccountName">Account Name</label>
                    <input type="text" id="bankAccountName" placeholder="Your Name">
                    
                    <label for="bankAccountNumber">Account Number</label>
                    <input type="text" id="bankAccountNumber" placeholder="1234567890">
                    
                    <label for="bankName">Bank Name</label>
                    <input type="text" id="bankName" placeholder="Bank Name">
                </div>
                
                <button class="btn-success" onclick="withdrawFunds()" id="withdrawBtn">
                    <i class="fas fa-money-bill-wave"></i>
                    <span id="withdrawBtnText">Withdraw Funds</span>
                    <span id="withdrawSpinner" class="hidden loading"></span>
                </button>
                
                <h3 style="margin-top: 30px;"><i class="fas fa-exchange-alt"></i> Transaction History</h3>
                <div class="transaction-history" id="transactionHistory">
                    <!-- Transactions will appear here -->
                    <div class="transaction-item">
                        <div class="transaction-details">
                            <div class="transaction-title">No transactions yet</div>
                            <div class="transaction-date">Start investing to see your history</div>
                        </div>
                        <div class="transaction-amount">$0.00</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="active" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-chart-line"></i> Active Investments</h2>
                
                <div class="active-investments" id="activeInvestments">
                    <!-- Active investments will appear here -->
                    <div class="investment-item">
                        <p>No active investments</p>
                        <p>Start a new investment to see it here</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="history" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-history"></i> Investment History</h2>
                
                <div id="historyInvestments">
                    <!-- Investment history will appear here -->
                    <div class="investment-item">
                        <p>No investment history yet</p>
                        <p>Completed investments will appear here</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="settings" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-user-cog"></i> Account Settings</h2>
                
                <div class="form-group">
                    <label for="settingsEmail">Email</label>
                    <input type="email" id="settingsEmail" readonly>
                </div>
                
                <div class="form-group">
                    <label for="settingsGCash">GCash Number</label>
                    <input type="text" id="settingsGCash" placeholder="09xxxxxxxxx">
                </div>
                
                <div class="form-group">
                    <label for="settingsWallet">Default USDT Wallet Address</label>
                    <input type="text" id="settingsWallet" placeholder="0x... or T...">
                </div>
                
                <button class="btn-secondary" onclick="updateAccountSettings()">
                    <i class="fas fa-save"></i> Save Changes
                </button>
                
                <div class="account-settings">
                    <h3><i class="fas fa-shield-alt"></i> Security</h3>
                    
                    <div class="security-note">
                        <i class="fas fa-exclamation-triangle"></i> For your security, never share your password or 2FA codes with anyone.
                    </div>
                    
                    <div class="two-factor">
                        <div class="two-factor-info">
                            <strong>Two-Factor Authentication (2FA)</strong>
                            <p>Add an extra layer of security to your account</p>
                            <div class="two-factor-status disabled" id="twoFactorStatus">
                                Disabled
                            </div>
                        </div>
                        <button class="btn-sm" id="twoFactorBtn" onclick="toggleTwoFactor()">
                            Enable 2FA
                        </button>
                    </div>
                    
                    <h4 style="margin-top: 30px;">Change Password</h4>
                    <div class="form-group">
                        <label for="currentPassword">Current Password</label>
                        <input type="password" id="currentPassword" placeholder="••••••••">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword" placeholder="••••••••">
                    </div>
                    <div class="form-group">
                        <label for="confirmNewPassword">Confirm New Password</label>
                        <input type="password" id="confirmNewPassword" placeholder="••••••••">
                    </div>
                    <button class="btn-warning" onclick="changePassword()">
                        <i class="fas fa-key"></i> Change Password
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Initialize particle.js background
        document.addEventListener('DOMContentLoaded', function() {
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#4e44ce"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        }
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": false,
                        "anim": {
                            "enable": false,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                        "anim": {
                            "enable": false,
                            "speed": 40,
                            "size_min": 0.1,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#4e44ce",
                        "opacity": 0.4,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 2,
                        "direction": "none",
                        "random": false,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": false,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 1
                            }
                        },
                        "bubble": {
                            "distance": 400,
                            "size": 40,
                            "duration": 2,
                            "opacity": 8,
                            "speed": 3
                        },
                        "repulse": {
                            "distance": 200,
                            "duration": 0.4
                        },
                        "push": {
                            "particles_nb": 4
                        },
                        "remove": {
                            "particles_nb": 2
                        }
                    }
                },
                "retina_detect": true
            });
            
            // Load saved theme preference
            const savedTheme = localStorage.getItem('theme') || 'mixed';
            setTheme(savedTheme, true);
        });

        // Enhanced User data storage with daily earnings
        let users = JSON.parse(localStorage.getItem('microyield_users')) || {};
        
        // Current user session with enhanced data
        let currentUser = null;
        
        // Investment limits - CHANGED TO 1000
        const DAILY_INVESTMENT_LIMIT = 1000;
        let dailyInvestmentUsed = 0;
        
        // Daily earnings calculation interval (24 hours)
        const DAILY_EARNINGS_INTERVAL = 24 * 60 * 60 * 1000;
        let earningsInterval;
        
        // Current withdrawal method
        let currentWithdrawMethod = 'gcash';
        
        // Fixed exchange rate 1 USD = 50 PHP
        const EXCHANGE_RATE = 50;
        
        // GCash payment details
        const GCASH_NUMBER = '09978014222';
        const GCASH_NAME = 'JE***D A.';
        
        // Currently selected investment product
        let selectedProduct = null;
        
        // Investment products
        const investmentProducts = [
            {
                id: 'starter',
                name: 'Starter Package',
                amount: 10.00,
                term: 30,
                returnPercent: 50,
                features: [
                    'Perfect for beginners',
                    'Low risk investment',
                    'Daily earnings (0.50 USDT/day)',
                    '24/7 support'
                ],
                dailyEarnings: 0.50 // Fixed $0.50 daily earnings for $10 investment
            },
            {
                id: 'standard',
                name: 'Standard Package',
                amount: 50.00,
                term: 30,
                returnPercent: 50,
                features: [
                    'Best value for money',
                    'Popular choice (2.50 USDT/day)',
                    'Priority support',
                    'Bonus 1% on referrals'
                ],
                dailyEarnings: 2.50 // Fixed $2.50 daily earnings for $50 investment
            },
            {
                id: 'premium',
                name: 'Premium Package',
                amount: 100.00,
                term: 30,
                returnPercent: 50,
                features: [
                    'High returns (5.00 USDT/day)',
                    'VIP support',
                    'Weekly reports',
                    'Bonus 2% on referrals'
                ],
                dailyEarnings: 5.00 // Fixed $5.00 daily earnings for $100 investment
            },
            {
                id: 'elite',
                name: 'Elite Package',
                amount: 500.00,
                term: 30,
                returnPercent: 50,
                features: [
                    'Maximum returns (25.00 USDT/day)',
                    'Dedicated account manager',
                    'Daily reports',
                    'Bonus 3% on referrals'
                ],
                dailyEarnings: 25.00 // Fixed $25.00 daily earnings for $500 investment
            },
            {
                id: 'custom',
                name: 'Custom Investment',
                amount: 0,
                term: 30,
                returnPercent: 50,
                features: [
                    'Choose your own amount',
                    'Flexible terms available',
                    'Personalized support',
                    'All features included'
                ],
                custom: true
            }
        ];
        
        // Set theme function
        function setTheme(theme, initialLoad = false) {
            // Remove all theme classes
            document.body.classList.remove('theme-light', 'theme-dark');
            
            // Set the new theme
            if (theme === 'light') {
                document.body.classList.add('theme-light');
                // Update particle colors for light theme
                updateParticleColors('rgba(78, 68, 206, 0.2)', 'rgba(78, 68, 206, 0.1)');
            } else if (theme === 'dark') {
                document.body.classList.add('theme-dark');
                // Update particle colors for dark theme
                updateParticleColors('#4e44ce', '#4e44ce');
            } else {
                // Mixed theme (default)
                // Update particle colors for mixed theme
                updateParticleColors('#4e44ce', '#4e44ce');
            }
            
            // Update active button in theme switcher
            const themeBtns = document.querySelectorAll('.theme-btn');
            themeBtns.forEach(btn => btn.classList.remove('active'));
            
            if (theme === 'light') {
                document.querySelector('.theme-btn:nth-child(2)').classList.add('active');
            } else if (theme === 'dark') {
                document.querySelector('.theme-btn:nth-child(3)').classList.add('active');
            } else {
                document.querySelector('.theme-btn:nth-child(1)').classList.add('active');
            }
            
            // Save theme preference if not initial load
            if (!initialLoad) {
                localStorage.setItem('theme', theme);
                showNotification(`Theme changed to ${theme} mode`, 'success');
            }
        }
        
        // Update particle.js colors
        function updateParticleColors(color, lineColor) {
            if (window.pJSDom && window.pJSDom.length > 0) {
                const pJS = window.pJSDom[0].pJS;
                pJS.particles.color.value = color;
                pJS.particles.line_linked.color = lineColor;
                pJS.fn.particlesRefresh();
            }
        }
        
        // Save users data to localStorage
        function saveUsersData() {
            localStorage.setItem('microyield_users', JSON.stringify(users));
            console.log('Users data saved to localStorage:', users);
        }
        
        // Save current user data to localStorage
        function saveCurrentUser() {
            if (currentUser) {
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                console.log('Current user saved to localStorage:', currentUser);
            }
        }
        
        // Convert USD to PHP
        function usdToPhp(amount) {
            return (amount * EXCHANGE_RATE).toFixed(2);
        }
        
        // Format PHP currency
        function formatPhp(amount) {
            return '₱' + parseFloat(amount).toLocaleString('en-PH', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }
        
        // Open GCash app with payment details
        function openGCashApp() {
            if (!selectedProduct) {
                showNotification('Please select an investment product first', 'error');
                return;
            }
            
            const amount = selectedProduct.custom ? 
                parseFloat(document.getElementById('customAmount').value) || 0 : 
                selectedProduct.amount;
                
            const phpAmount = usdToPhp(amount);
            
            // Create GCash deep link
            const gcashLink = `gcash://pay?number=${GCASH_NUMBER}&name=${encodeURIComponent(GCASH_NAME)}&amount=${phpAmount}`;
            
            // Try to open GCash app
            window.location.href = gcashLink;
            
            // Fallback to GCash web if app not installed
            setTimeout(() => {
                if (!document.hidden) {
                    window.open(`https://www.gcash.com/pay-qr?qr=${encodeURIComponent(GCASH_NUMBER)}&amount=${phpAmount}`, '_blank');
                }
            }, 500);
            
            // Store payment attempt in local storage
            const paymentAttempt = {
                amount: amount,
                phpAmount: phpAmount,
                timestamp: new Date().getTime(),
                status: 'pending'
            };
            
            if (currentUser) {
                const user = users[currentUser.email];
                if (user) {
                    if (!user.paymentAttempts) {
                        user.paymentAttempts = [];
                    }
                    user.paymentAttempts.push(paymentAttempt);
                    saveUsersData();
                }
            }
            
            showNotification('Opening GCash app to complete payment...', 'info');
        }
        
        // Check if user is logged in on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check localStorage for existing session
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    showApp();
                } catch (e) {
                    localStorage.removeItem('currentUser');
                    showAuth();
                }
            } else {
                showAuth();
            }
            
            // Initialize investment products
            loadInvestmentProducts();
            
            // Initialize withdrawal calculator
            document.getElementById('withdrawAmount').addEventListener('input', updateWithdrawalCalc);
            updateWithdrawalCalc();
            
            // Generate a random deposit address for demo
            updateDepositAddress();
            
            // Set up payment method selection
            selectPaymentMethod('crypto');
            
            // Set up withdrawal method selection
            selectWithdrawMethod('gcash');
            
            // Initialize demo data if no users exist
            if (Object.keys(users).length === 0) {
                initializeDemoData();
            }
            
            // Check for page visibility changes (to detect if GCash app opened successfully)
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden) {
                    // User returned to the page, check if payment was made
                    checkGCashPayment();
                }
            });
        });
        
        // Load investment products
        function loadInvestmentProducts() {
            const container = document.getElementById('investmentProducts');
            if (!container) return;
            
            container.innerHTML = '';
            
            investmentProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.id = `product-${product.id}`;
                productCard.onclick = () => selectProduct(product);
                
                const returnAmount = product.amount * (product.returnPercent / 100);
                
                if (product.custom) {
                    productCard.innerHTML = `
                        <h3>${product.name}</h3>
                        <div class="product-term">Customizable term</div>
                        <div class="product-features">
                            <ul>
                                ${product.features.map(f => `<li><i class="fas fa-check"></i> ${f}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="form-group" style="margin-top: 15px;">
                            <label for="customAmount">Amount (USDT)</label>
                            <input type="number" id="customAmount" min="1" max="1000" step="0.01" placeholder="Enter amount">
                            <small style="color: var(--text-secondary);">Minimum: $1.00 (₱50) | Maximum: $1000.00 (₱50,000)</small>
                        </div>
                        <div class="product-return">50% Return in 30 days</div>
                    `;
                } else {
                    productCard.innerHTML = `
                        <h3>${product.name}</h3>
                        <div class="product-price">$${product.amount.toFixed(2)} <small>(${formatPhp(usdToPhp(product.amount))})</small></div>
                        <div class="product-term">${product.term} days term</div>
                        <div class="product-features">
                            <ul>
                                ${product.features.map(f => `<li><i class="fas fa-check"></i> ${f}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="product-return">${product.returnPercent}% Return ($${returnAmount.toFixed(2)})</div>
                    `;
                }
                
                container.appendChild(productCard);
            });
        }
        
        // Select investment product
        function selectProduct(product) {
            // Deselect all products
            document.querySelectorAll('.product-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Select the clicked product
            document.getElementById(`product-${product.id}`).classList.add('selected');
            
            selectedProduct = product;
            
            // Calculate values
            let amount = product.amount;
            if (product.custom) {
                const customAmount = parseFloat(document.getElementById('customAmount').value) || 0;
                amount = customAmount;
                document.getElementById('customAmount').addEventListener('input', function() {
                    updateProductDisplay(product);
                });
            }
            
            updateProductDisplay(product);
            
            // Enable invest button
            document.getElementById('investBtn').disabled = false;
            document.getElementById('investBtnText').textContent = `Invest in ${product.name}`;
        }
        
        // Update product display (removed maturity date)
        function updateProductDisplay(product) {
            let amount = product.amount;
            if (product.custom) {
                amount = parseFloat(document.getElementById('customAmount').value) || 0;
            }
            
            const returnAmount = amount * (product.returnPercent / 100);
            const dailyEarnings = product.dailyEarnings || (amount * 0.05); // Use fixed daily earnings if specified
            
            // Update display
            document.getElementById('selectedProductDisplay').style.display = 'block';
            document.getElementById('displayProductName').textContent = product.name;
            document.getElementById('displayAmount').textContent = amount.toFixed(2);
            document.getElementById('displayAmountPHP').textContent = formatPhp(usdToPhp(amount));
            document.getElementById('displayTerm').textContent = product.term;
            document.getElementById('displayReturn').textContent = returnAmount.toFixed(2);
            document.getElementById('displayReturnPHP').textContent = formatPhp(usdToPhp(returnAmount));
            document.getElementById('displayReturnPercent').textContent = `${product.returnPercent}%`;
            document.getElementById('displayDailyEarnings').textContent = dailyEarnings.toFixed(4);
            document.getElementById('displayDailyEarningsPHP').textContent = formatPhp(usdToPhp(dailyEarnings));
        }
        
        // Check if GCash payment was completed
        function checkGCashPayment() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user || !user.paymentAttempts || user.paymentAttempts.length === 0) return;
            
            // Get the most recent payment attempt
            const lastAttempt = user.paymentAttempts[user.paymentAttempts.length - 1];
            
            // Skip if already processed
            if (lastAttempt.status !== 'pending') return;
            
            // In a real app, you would verify the payment with your backend
            // For this demo, we'll simulate a successful payment after returning
            showNotification('Please upload your GCash payment receipt to complete the investment', 'info');
        }
        
        // Initialize demo data with daily earnings
        function initializeDemoData() {
            // Create a demo user
            const demoEmail = 'demo@microyield.com';
            users[demoEmail] = {
                email: demoEmail,
                password: 'demo123', // In real app, hash this password
                gcash: '09123456789',
                wallet: 'TDEMO123456789012345678901234567890',
                dailyEarnings: 1.25,
                totalDeposits: 15.00,
                investments: [],
                history: [],
                transactions: [
                    {
                        id: Date.now() - 86400000,
                        amount: 7.50,
                        description: 'Investment Returns',
                        date: new Date(Date.now() - 86400000).toISOString(),
                        status: 'completed'
                    },
                    {
                        id: Date.now() - 172800000,
                        amount: -5.00,
                        description: 'GCash Investment',
                        date: new Date(Date.now() - 172800000).toISOString(),
                        status: 'completed'
                    },
                    {
                        id: Date.now() - 86400000,
                        amount: 0.50,
                        description: 'Daily Earnings',
                        date: new Date(Date.now() - 86400000).toISOString(),
                        status: 'completed'
                    }
                ],
                totalInvested: 15.00,
                totalReturns: 7.50,
                settings: {
                    twoFactorEnabled: false
                },
                lastEarningsDate: new Date().getTime()
            };
            
            // Add a sample investment if none exists
            if (users[demoEmail].investments.length === 0) {
                const startDate = new Date();
                const endDate = new Date();
                endDate.setDate(startDate.getDate() + 30); // 30 days term
                
                users[demoEmail].investments.push({
                    id: Date.now(),
                    amount: 10.00,
                    startDate: startDate.getTime(),
                    endDate: endDate.getTime(),
                    walletAddress: users[demoEmail].wallet,
                    status: 'active',
                    paymentMethod: 'USDT',
                    dailyEarnings: 0.50, // Fixed $0.50 daily earnings for $10 investment
                    productName: 'Starter Package'
                });
            }
            
            // Add a sample completed investment if none exists
            if (users[demoEmail].history.length === 0) {
                const startDate = new Date(Date.now() - 35 * 86400000);
                const endDate = new Date(Date.now() - 5 * 86400000);
                
                users[demoEmail].history.push({
                    id: Date.now(),
                    amount: 5.00,
                    startDate: startDate.getTime(),
                    endDate: endDate.getTime(),
                    walletAddress: users[demoEmail].wallet,
                    status: 'completed',
                    paymentMethod: 'GCash',
                    returnAmount: 7.50, // 50% return
                    productName: 'Standard Package'
                });
            }
            
            saveUsersData();
        }
        
        // Show authentication section
        function showAuth() {
            document.getElementById('authSection').classList.remove('hidden');
            document.getElementById('appSection').classList.add('hidden');
            
            // Clear any existing intervals
            if (earningsInterval) {
                clearInterval(earningsInterval);
            }
        }
        
        // Show application section
        function showApp() {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('appSection').classList.remove('hidden');
            
            // Update user info
            if (currentUser) {
                const user = users[currentUser.email];
                if (!user) {
                    logout();
                    return;
                }
                
                document.getElementById('userEmailText').textContent = currentUser.email;
                document.getElementById('walletAddress').value = user.wallet || '';
                document.getElementById('settingsEmail').value = currentUser.email;
                document.getElementById('settingsGCash').value = user.gcash || '';
                document.getElementById('settingsWallet').value = user.wallet || '';
                document.getElementById('gcashWithdrawNumber').value = user.gcash || '';
                
                // Initialize daily earnings if not exists
                if (user.dailyEarnings === undefined) {
                    user.dailyEarnings = 0;
                }
                if (user.lastEarningsDate === undefined) {
                    user.lastEarningsDate = new Date().getTime();
                }
                if (user.totalDeposits === undefined) {
                    user.totalDeposits = 0;
                }
                
                // Update 2FA status
                updateTwoFactorStatus();
                
                // Start daily earnings calculation
                startDailyEarningsCalculation();
                
                // Load user's data
                loadUserInvestments();
                updateWalletBalance();
                loadTransactionHistory();
                updateStats();
            }
        }
        
        // Start daily earnings calculation
        function startDailyEarningsCalculation() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            // Clear any existing interval
            if (earningsInterval) {
                clearInterval(earningsInterval);
            }
            
            // Calculate earnings immediately
            calculateDailyEarnings();
            
            // Set up interval for daily calculation (every 24 hours)
            earningsInterval = setInterval(calculateDailyEarnings, DAILY_EARNINGS_INTERVAL);
        }
        
        // Calculate daily earnings from active investments (fixed amounts based on product)
        function calculateDailyEarnings() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user || !user.investments) return;
            
            const now = new Date().getTime();
            const lastEarningsDate = user.lastEarningsDate || now;
            
            // Check if 24 hours have passed since last earnings calculation
            if (now - lastEarningsDate >= DAILY_EARNINGS_INTERVAL) {
                let totalDailyEarnings = 0;
                
                // Calculate earnings for each active investment
                user.investments.forEach(investment => {
                    if (investment.status === 'active') {
                        // Use the fixed daily earnings amount for the investment
                        const dailyEarning = investment.dailyEarnings || (investment.amount * 0.05); // 5% daily as fallback
                        totalDailyEarnings += dailyEarning;
                        
                        // Add transaction for this investment's earnings
                        addTransaction(dailyEarning, `Daily Earnings (Investment #${investment.id})`);
                    }
                });
                
                // Update user's daily earnings
                user.dailyEarnings = (user.dailyEarnings || 0) + totalDailyEarnings;
                user.lastEarningsDate = now;
                
                // Save updated data
                saveUsersData();
                saveCurrentUser();
                
                // Update UI
                updateWalletBalance();
                updateStats();
                
                // Show notification if earnings were added
                if (totalDailyEarnings > 0) {
                    showNotification(`Daily earnings of $${totalDailyEarnings.toFixed(4)} (${formatPhp(usdToPhp(totalDailyEarnings))}) added to your balance!`, 'success');
                }
            }
        }
        
        // Update stats display with daily earnings
        function updateStats() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            document.getElementById('totalInvested').textContent = `$${user.totalInvested?.toFixed(2) || '0.00'}`;
            document.getElementById('totalReturns').textContent = `$${user.totalReturns?.toFixed(2) || '0.00'}`;
            document.getElementById('activeCount').textContent = user.investments?.length || '0';
            document.getElementById('dailyEarnings').textContent = `$${user.dailyEarnings?.toFixed(4) || '0.0000'}`;
            
            // Update daily earnings display in wallet tab
            if (document.getElementById('dailyEarningsAmount')) {
                document.getElementById('dailyEarningsAmount').textContent = user.dailyEarnings?.toFixed(4) || '0.0000';
                document.getElementById('dailyEarningsAmountPHP').textContent = formatPhp(usdToPhp(user.dailyEarnings || 0));
            }
            
            // Update total deposits display
            if (document.getElementById('totalDeposits')) {
                document.getElementById('totalDeposits').textContent = user.totalDeposits?.toFixed(2) || '0.00';
                document.getElementById('totalDepositsPHP').textContent = formatPhp(usdToPhp(user.totalDeposits || 0));
            }
        }
        
        // Switch between login and register tabs
        function switchAuthTab(tab) {
            document.getElementById('loginContent').style.display = 'none';
            document.getElementById('registerContent').style.display = 'none';
            document.getElementById('forgotContent').style.display = 'none';
            
            if (tab === 'login') {
                document.getElementById('loginContent').style.display = 'block';
                document.querySelectorAll('.auth-tab')[0].classList.add('active');
                document.querySelectorAll('.auth-tab')[1].classList.remove('active');
            } else if (tab === 'register') {
                document.getElementById('registerContent').style.display = 'block';
                document.querySelectorAll('.auth-tab')[0].classList.remove('active');
                document.querySelectorAll('.auth-tab')[1].classList.add('active');
            } else if (tab === 'forgot') {
                document.getElementById('forgotContent').style.display = 'block';
                document.querySelectorAll('.auth-tab')[0].classList.remove('active');
                document.querySelectorAll('.auth-tab')[1].classList.remove('active');
            }
        }
        
        // Show forgot password form
        function showForgotPassword() {
            switchAuthTab('forgot');
        }
        
        // Show terms and conditions
        function showTerms() {
            alert('Terms & Conditions:\n\n1. This is a demo platform for educational purposes only.\n2. No real investments are being made.\n3. All data is stored locally in your browser.\n4. Fixed exchange rate: 1 USD = 50 PHP');
        }
        
        // Register new user with enhanced validation
        function register() {
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const gcash = document.getElementById('regGCash').value.trim();
            const termsAccepted = document.getElementById('regTerms').checked;
            
            // Simple validation
            if (!email || !password || !confirmPassword) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            if (!validateEmail(email)) {
                showNotification('Please enter a valid email address', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 8) {
                showNotification('Password must be at least 8 characters', 'error');
                return;
            }
            
            if (!/\d/.test(password)) {
                showNotification('Password must contain at least 1 number', 'error');
                return;
            }
            
            if (users[email]) {
                showNotification('Email already registered', 'error');
                return;
            }
            
            if (gcash && !/^09\d{9}$/.test(gcash)) {
                showNotification('Please enter a valid GCash number (09xxxxxxxxx)', 'error');
                return;
            }
            
            if (!termsAccepted) {
                showNotification('You must accept the Terms & Conditions', 'error');
                return;
            }
            
            // Show loading state
            document.getElementById('registerBtnText').classList.add('hidden');
            document.getElementById('registerSpinner').classList.remove('hidden');
            document.getElementById('registerBtn').disabled = true;
            
            // Simulate API call delay
            setTimeout(() => {
                // Create new user with enhanced data structure
                users[email] = {
                    email,
                    password, // In real app, hash this password
                    gcash,
                    wallet: '',
                    dailyEarnings: 0,
                    totalDeposits: 0,
                    investments: [],
                    history: [],
                    transactions: [],
                    totalInvested: 0,
                    totalReturns: 0,
                    settings: {
                        twoFactorEnabled: false
                    },
                    createdAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString(),
                    lastEarningsDate: new Date().getTime()
                };
                
                // Save the new user data
                saveUsersData();
                
                showNotification('Registration successful! Please login.', 'success');
                switchAuthTab('login');
                
                // Reset form and button state
                document.getElementById('regEmail').value = '';
                document.getElementById('regPassword').value = '';
                document.getElementById('regConfirmPassword').value = '';
                document.getElementById('regGCash').value = '';
                document.getElementById('regTerms').checked = false;
                
                document.getElementById('registerBtnText').classList.remove('hidden');
                document.getElementById('registerSpinner').classList.add('hidden');
                document.getElementById('registerBtn').disabled = false;
            }, 1500);
        }
        
        // Validate email format
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        // Login user with enhanced validation
        function login() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showNotification('Please enter email and password', 'error');
                return;
            }
            
            if (!validateEmail(email)) {
                showNotification('Please enter a valid email address', 'error');
                return;
            }
            
            // Show loading state
            document.getElementById('loginBtnText').classList.add('hidden');
            document.getElementById('loginSpinner').classList.remove('hidden');
            document.getElementById('loginBtn').disabled = true;
            
            // Simulate API call delay
            setTimeout(() => {
                const user = users[email];
                
                if (!user || user.password !== password) {
                    showNotification('Invalid email or password', 'error');
                    
                    // Reset button state
                    document.getElementById('loginBtnText').classList.remove('hidden');
                    document.getElementById('loginSpinner').classList.add('hidden');
                    document.getElementById('loginBtn').disabled = false;
                    return;
                }
                
                // Login successful
                currentUser = {
                    email: user.email,
                    wallet: user.wallet,
                    gcash: user.gcash
                };
                
                // Update last login
                user.lastLogin = new Date().toISOString();
                
                // Save to localStorage
                saveCurrentUser();
                
                // Show app
                showApp();
                showNotification('Login successful!', 'success');
                
                // Clear form
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
                // Reset button state
                document.getElementById('loginBtnText').classList.remove('hidden');
                document.getElementById('loginSpinner').classList.add('hidden');
                document.getElementById('loginBtn').disabled = false;
            }, 1500);
        }
        
        // Send reset password link
        function sendResetPassword() {
            const email = document.getElementById('forgotEmail').value.trim();
            
            if (!email) {
                showNotification('Please enter your email address', 'error');
                return;
            }
            
            if (!validateEmail(email)) {
                showNotification('Please enter a valid email address', 'error');
                return;
            }
            
            if (!users[email]) {
                showNotification('No account found with that email', 'error');
                return;
            }
            
            // Show loading state
            document.getElementById('resetBtnText').classList.add('hidden');
            document.getElementById('resetSpinner').classList.remove('hidden');
            document.getElementById('resetBtn').disabled = true;
            
            // Simulate sending email
            setTimeout(() => {
                showNotification('Password reset link sent to your email', 'success');
                switchAuthTab('login');
                
                // Reset button state
                document.getElementById('resetBtnText').classList.remove('hidden');
                document.getElementById('resetSpinner').classList.add('hidden');
                document.getElementById('resetBtn').disabled = false;
            }, 2000);
        }
        
        // Logout user
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            showAuth();
            showNotification('Logged out successfully', 'success');
        }
        
        // Load user's investments with enhanced display
        function loadUserInvestments() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            const activeContainer = document.getElementById('activeInvestments');
            const historyContainer = document.getElementById('historyInvestments');
            
            // Clear existing
            activeContainer.innerHTML = '';
            historyContainer.innerHTML = '';
            
            // Check if there are no investments
            if (user.investments.length === 0) {
                activeContainer.innerHTML = `
                    <div class="investment-item">
                        <p>No active investments</p>
                        <p>Start a new investment to see it here</p>
                    </div>
                `;
            }
            
            if (user.history.length === 0) {
                historyContainer.innerHTML = `
                    <div class="investment-item">
                        <p>No investment history yet</p>
                        <p>Completed investments will appear here</p>
                    </div>
                `;
            }
            
            // Add active investments
            user.investments.forEach(investment => {
                const item = createInvestmentElement(investment);
                activeContainer.appendChild(item);
            });
            
            // Add history
            user.history.forEach(investment => {
                const item = createInvestmentElement(investment, true);
                historyContainer.appendChild(item);
            });
            
            // Update active count
            updateStats();
            
            // Start countdown timers
            updateCountdown();
        }
        
        // Create investment element for display with enhanced UI
        function createInvestmentElement(investment, isHistory = false) {
            const item = document.createElement('div');
            item.className = 'investment-item';
            
            const status = isHistory ? 
                `<p>Status: <span class="status-completed transaction-status">Completed</span></p>` :
                `<div class="countdown" data-end-time="${investment.endDate}">
                    <span class="status-pending transaction-status">Active</span> • 
                    ${formatCountdown(investment.endDate - Date.now())}
                </div>`;
            
            const returnAmount = isHistory ? 
                investment.returnAmount || (investment.amount * 1.50).toFixed(2) : 
                (investment.amount * 1.50).toFixed(2);
            
            const dailyEarnings = investment.dailyEarnings || (investment.amount * 0.05); // Use fixed daily earnings if specified
            const dailyEarningsPHP = usdToPhp(dailyEarnings);
            
            item.innerHTML = `
                <p>Product: <span>${investment.productName || 'Custom Investment'}</span></p>
                <p>Amount: <span class="highlight">${investment.amount.toFixed(2)} USDT (${formatPhp(usdToPhp(investment.amount))})</span></p>
                <p>Start Date: <span>${new Date(investment.startDate).toLocaleDateString()}</span></p>
                <p>${!isHistory ? 'End Date' : 'Completed Date'}: <span>${new Date(investment.endDate).toLocaleDateString()}</span></p>
                <p>Payment Method: <span>${investment.paymentMethod || 'USDT'}</span></p>
                ${!isHistory ? `<p>Daily Earnings: <span class="highlight">${dailyEarnings.toFixed(4)} USDT (${formatPhp(dailyEarningsPHP)})</span></p>` : ''}
                ${status}
                <p>${isHistory ? 'Returned' : 'Expected Return'}: <span class="highlight">${returnAmount} USDT (${formatPhp(usdToPhp(returnAmount))})</span></p>
            `;
            
            return item;
        }
        
        // Format countdown time with better readability
        function formatCountdown(ms) {
            if (ms <= 0) return "<span style='color: var(--success)'>Completed</span>";
            
            const seconds = Math.floor(ms / 1000);
            const days = Math.floor(seconds / 86400);
            const hours = Math.floor((seconds % 86400) / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            return `
                <span style="font-weight: 600; color: ${days < 3 ? 'var(--warning)' : 'var(--primary)'}">
                    ${days}d ${hours.toString().padStart(2, '0')}h ${minutes.toString().padStart(2, '0')}m
                </span>
            `;
        }
        
        // Update withdrawal calculation with 15% tax
        function updateWithdrawalCalc() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value) || 0;
            const tax = (amount * 0.15).toFixed(2); // 15% tax
            const receive = (amount * 0.85).toFixed(2); // 85% after tax
            
            document.getElementById('withdrawTax').textContent = tax;
            document.getElementById('withdrawTaxPHP').textContent = formatPhp(usdToPhp(tax));
            document.getElementById('withdrawReceive').textContent = receive;
            document.getElementById('withdrawReceivePHP').textContent = formatPhp(usdToPhp(receive));
            
            // Update available balance (daily earnings only)
            if (currentUser && users[currentUser.email]) {
                const user = users[currentUser.email];
                const available = (user.dailyEarnings || 0).toFixed(2);
                document.getElementById('availableBalance').textContent = available;
                document.getElementById('availableBalancePHP').textContent = formatPhp(usdToPhp(available));
            }
        }
        
        // Tab functionality with smooth transitions
        function openTab(tabName) {
            const tabs = document.getElementsByClassName('tab');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            
            // Update content if needed
            if (tabName === 'wallet') {
                updateWithdrawalCalc();
            } else if (tabName === 'active' || tabName === 'history') {
                loadUserInvestments();
            } else if (tabName === 'settings') {
                // Refresh settings data
                if (currentUser) {
                    const user = users[currentUser.email];
                    if (user) {
                        document.getElementById('settingsGCash').value = user.gcash || '';
                        document.getElementById('settingsWallet').value = user.wallet || '';
                        document.getElementById('gcashWithdrawNumber').value = user.gcash || '';
                        updateTwoFactorStatus();
                    }
                }
            } else if (tabName === 'invest') {
                // Refresh products display
                loadInvestmentProducts();
            }
        }
        
        // Select payment method
        function selectPaymentMethod(method) {
            document.getElementById('cryptoMethod').classList.remove('active');
            document.getElementById('gcashMethod').classList.remove('active');
            document.getElementById('paypalMethod').classList.remove('active');
            document.getElementById('bankMethod').classList.remove('active');
            
            document.getElementById('cryptoPayment').classList.add('hidden');
            document.getElementById('gcashPayment').classList.add('hidden');
            document.getElementById('paypalPayment').classList.add('hidden');
            document.getElementById('bankPayment').classList.add('hidden');
            
            if (method === 'crypto') {
                document.getElementById('cryptoMethod').classList.add('active');
                document.getElementById('cryptoPayment').classList.remove('hidden');
            } else if (method === 'gcash') {
                document.getElementById('gcashMethod').classList.add('active');
                document.getElementById('gcashPayment').classList.remove('hidden');
            } else if (method === 'paypal') {
                document.getElementById('paypalMethod').classList.add('active');
                document.getElementById('paypalPayment').classList.remove('hidden');
            } else if (method === 'bank') {
                document.getElementById('bankMethod').classList.add('active');
                document.getElementById('bankPayment').classList.remove('hidden');
            }
        }
        
        // Select withdrawal method
        function selectWithdrawMethod(method) {
            document.getElementById('internalWithdraw').classList.remove('active');
            document.getElementById('gcashWithdraw').classList.remove('active');
            document.getElementById('cryptoWithdraw').classList.remove('active');
            document.getElementById('bankWithdraw').classList.remove('active');
            
            document.getElementById('internalWithdrawDetails').classList.add('hidden');
            document.getElementById('gcashWithdrawDetails').classList.add('hidden');
            document.getElementById('cryptoWithdrawDetails').classList.add('hidden');
            document.getElementById('bankWithdrawDetails').classList.add('hidden');
            
            if (method === 'internal') {
                document.getElementById('internalWithdraw').classList.add('active');
                document.getElementById('internalWithdrawDetails').classList.remove('hidden');
            } else if (method === 'gcash') {
                document.getElementById('gcashWithdraw').classList.add('active');
                document.getElementById('gcashWithdrawDetails').classList.remove('hidden');
            } else if (method === 'crypto') {
                document.getElementById('cryptoWithdraw').classList.add('active');
                document.getElementById('cryptoWithdrawDetails').classList.remove('hidden');
            } else if (method === 'bank') {
                document.getElementById('bankWithdraw').classList.add('active');
                document.getElementById('bankWithdrawDetails').classList.remove('hidden');
            }
            
            currentWithdrawMethod = method;
        }
        
        // Create investment function with enhanced validation - CHANGED MAX TO 1000
        function createInvestment() {
            if (!currentUser) {
                showNotification('Please login first', 'error');
                return;
            }
            
            if (!selectedProduct) {
                showNotification('Please select an investment product first', 'error');
                return;
            }
            
            let amount = selectedProduct.amount;
            if (selectedProduct.custom) {
                amount = parseFloat(document.getElementById('customAmount').value) || 0;
                
                if (amount < 1 || amount > 1000) {
                    showNotification('Investment amount must be between $1.00 (₱50) and $1000.00 (₱50,000)', 'error');
                    return;
                }
            }
            
            const walletAddress = document.getElementById('walletAddress').value.trim();
            
            // Check payment method
            let useMethod = 'USDT';
            let receiptElement = '';
            
            if (!document.getElementById('gcashPayment').classList.contains('hidden')) {
                useMethod = 'GCash';
                receiptElement = 'gcashReceipt';
                
                // Check if receipt was uploaded
                const receipt = document.getElementById(receiptElement).files[0];
                if (!receipt) {
                    showNotification('Please upload your GCash payment receipt', 'error');
                    return;
                }
            } else if (!document.getElementById('paypalPayment').classList.contains('hidden')) {
                useMethod = 'PayPal';
                receiptElement = 'paypalReceipt';
                
                const receipt = document.getElementById(receiptElement).files[0];
                if (!receipt) {
                    showNotification('Please upload your PayPal payment receipt', 'error');
                    return;
                }
            } else if (!document.getElementById('bankPayment').classList.contains('hidden')) {
                useMethod = 'Bank Transfer';
                receiptElement = 'bankReceipt';
                
                const receipt = document.getElementById(receiptElement).files[0];
                if (!receipt) {
                    showNotification('Please upload your bank payment receipt', 'error');
                    return;
                }
            } else {
                // Crypto payment
                if (!walletAddress || walletAddress.length < 20) {
                    showNotification('Please enter a valid wallet address', 'error');
                    return;
                }
                
                // Update user's default wallet if changed
                if (walletAddress !== currentUser.wallet) {
                    currentUser.wallet = walletAddress;
                    users[currentUser.email].wallet = walletAddress;
                    saveCurrentUser();
                    saveUsersData();
                }
            }
            
            // Show loading state
            document.getElementById('investBtnText').classList.add('hidden');
            document.getElementById('investSpinner').classList.remove('hidden');
            document.getElementById('investBtn').disabled = true;
            
            // Simulate processing delay
            setTimeout(() => {
                showNotification(`Investment of ${amount.toFixed(2)} USDT (${formatPhp(usdToPhp(amount))}) created! ${useMethod !== 'USDT' ? 'Payment received!' : 'Send your USDT to the provided address.'}`, 'success');
                
                // Create investment object
                const startDate = new Date();
                const endDate = new Date();
                endDate.setDate(startDate.getDate() + selectedProduct.term);
                
                // Calculate daily earnings - use fixed amount if specified, otherwise 5% of investment
                const dailyEarnings = selectedProduct.dailyEarnings || (amount * 0.05);
                
                const investment = {
                    id: Date.now(),
                    productName: selectedProduct.name,
                    amount,
                    startDate: startDate.getTime(),
                    endDate: endDate.getTime(),
                    walletAddress: useMethod === 'USDT' ? walletAddress : useMethod,
                    status: 'active',
                    paymentMethod: useMethod,
                    dailyEarnings: dailyEarnings
                };
                
                // Add to user's investments
                const user = users[currentUser.email];
                if (!user.investments) {
                    user.investments = [];
                }
                user.investments.push(investment);
                
                // Update total invested and total deposits
                user.totalInvested = (user.totalInvested || 0) + amount;
                user.totalDeposits = (user.totalDeposits || 0) + amount;
                
                // Add transaction (this should NOT affect dailyEarnings)
                const transaction = {
                    id: Date.now(),
                    amount: -amount,
                    description: `${useMethod} Investment (${selectedProduct.name})`,
                    date: new Date().toISOString(),
                    status: 'completed',
                    type: 'debit'
                };
                
                if (!user.transactions) {
                    user.transactions = [];
                }
                user.transactions.unshift(transaction);
                
                // Save updated data
                saveUsersData();
                
                // Update deposit address for next investment
                updateDepositAddress();
                
                // Reset form
                if (useMethod !== 'USDT') {
                    document.getElementById(receiptElement).value = '';
                }
                
                // Deselect product
                document.querySelectorAll('.product-card').forEach(card => {
                    card.classList.remove('selected');
                });
                selectedProduct = null;
                document.getElementById('selectedProductDisplay').style.display = 'none';
                
                // Reload investments and wallet
                loadUserInvestments();
                updateWalletBalance();
                updateStats();
                
                // Reset button state
                document.getElementById('investBtnText').textContent = 'Select a product to invest';
                document.getElementById('investBtnText').classList.remove('hidden');
                document.getElementById('investSpinner').classList.add('hidden');
                document.getElementById('investBtn').disabled = true;
                
                // Switch to active investments tab
                openTab('active');
            }, 2000);
        }
        
        // Update deposit address (random for demo)
        function updateDepositAddress() {
            const chars = '0123456789ABCDEF';
            let address = 'TB';
            for (let i = 0; i < 33; i++) {
                address += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            if (document.getElementById('depositAddress')) {
                document.getElementById('depositAddress').textContent = address;
                
                // Update QR code
                const qrCodeImg = document.querySelector('.qr-code img');
                if (qrCodeImg) {
                    qrCodeImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${address}`;
                }
            }
        }
        
        // Update wallet balance display with daily earnings
        function updateWalletBalance() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            // Update daily earnings display
            const dailyEarningsElement = document.getElementById('dailyEarningsAmount');
            if (dailyEarningsElement) {
                dailyEarningsElement.textContent = (user.dailyEarnings || 0).toFixed(4);
                document.getElementById('dailyEarningsAmountPHP').textContent = formatPhp(usdToPhp(user.dailyEarnings || 0));
            }
            
            // Update total deposits display
            const totalDepositsElement = document.getElementById('totalDeposits');
            if (totalDepositsElement) {
                totalDepositsElement.textContent = (user.totalDeposits || 0).toFixed(2);
                document.getElementById('totalDepositsPHP').textContent = formatPhp(usdToPhp(user.totalDeposits || 0));
            }
            
            // Update available balance in withdrawal section (daily earnings only)
            const availableBalanceElement = document.getElementById('availableBalance');
            if (availableBalanceElement) {
                const available = (user.dailyEarnings || 0);
                availableBalanceElement.textContent = available.toFixed(2);
                document.getElementById('availableBalancePHP').textContent = formatPhp(usdToPhp(available));
            }
        }
        
        // Add transaction with enhanced data
        function addTransaction(amount, description, status = 'completed') {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            const transaction = {
                id: Date.now(),
                amount,
                description,
                date: new Date().toISOString(),
                status,
                type: amount > 0 ? 'credit' : 'debit'
            };
            
            if (!user.transactions) {
                user.transactions = [];
            }
            
            user.transactions.unshift(transaction);
            
            // Update balance if completed
            if (status === 'completed') {
                if (amount > 0) {
                    // For positive transactions (earnings, returns)
                    if (description.includes('Earnings')) {
                        // Add to daily earnings
                        user.dailyEarnings = (user.dailyEarnings || 0) + amount;
                    } else {
                        // Add to daily earnings (since we removed balance)
                        user.dailyEarnings = (user.dailyEarnings || 0) + amount;
                        
                        // Update total returns if this is a return
                        if (description.includes('Return')) {
                            user.totalReturns = (user.totalReturns || 0) + amount;
                        }
                    }
                }
            }
            
            // Save updated data
            saveUsersData();
            
            // Update display
            updateWalletBalance();
            loadTransactionHistory();
            updateStats();
        }
        
        // Load transaction history with enhanced UI
        function loadTransactionHistory() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user || !user.transactions) return;
            
            const container = document.getElementById('transactionHistory');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (user.transactions.length === 0) {
                container.innerHTML = `
                    <div class="transaction-item">
                        <div class="transaction-details">
                            <div class="transaction-title">No transactions yet</div>
                            <div class="transaction-date">Start investing to see your history</div>
                        </div>
                        <div class="transaction-amount">$0.00</div>
                    </div>
                `;
                return;
            }
            
            user.transactions.forEach(transaction => {
                const item = document.createElement('div');
                item.className = 'transaction-item';
                
                const amountClass = transaction.amount > 0 ? 'transaction-positive' : 'transaction-negative';
                const statusClass = transaction.status === 'pending' ? 'transaction-pending' : '';
                
                // Determine status display
                let statusDisplay = '';
                if (transaction.status === 'pending') {
                    statusDisplay = '<span class="status-pending transaction-status">Pending</span>';
                } else if (transaction.status === 'failed') {
                    statusDisplay = '<span class="status-failed transaction-status">Failed</span>';
                } else if (transaction.amount > 0) {
                    statusDisplay = '<span class="status-completed transaction-status">Completed</span>';
                }
                
                item.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${transaction.description}</div>
                        <div class="transaction-date">${new Date(transaction.date).toLocaleString()}</div>
                        ${statusDisplay}
                    </div>
                    <div class="transaction-amount ${amountClass} ${statusClass}">
                        ${transaction.amount > 0 ? '+' : ''}${transaction.amount.toFixed(4)} USDT (${formatPhp(usdToPhp(transaction.amount))})
                    </div>
                `;
                
                container.appendChild(item);
            });
        }
        
        // Withdraw funds with enhanced validation using daily earnings only
        function withdrawFunds() {
            if (!currentUser) {
                showNotification('Please login first', 'error');
                return;
            }
            
            const amountInput = document.getElementById('withdrawAmount');
            const amount = parseFloat(amountInput.value);
            const user = users[currentUser.email];
            
            if (!amount || amount < 1) {
                showNotification('Minimum withdrawal amount is $1.00 (₱50)', 'error');
                return;
            }
            
            // Check available daily earnings
            const availableEarnings = user.dailyEarnings || 0;
            
            if (amount > availableEarnings) {
                showNotification(`Insufficient earnings. Available: $${availableEarnings.toFixed(2)}`, 'error');
                return;
            }
            
            // Validate withdrawal method details
            let isValid = true;
            let description = '';
            
            if (currentWithdrawMethod === 'internal') {
                const recipientEmail = document.getElementById('internalWalletEmail').value.trim();
                if (!recipientEmail || !validateEmail(recipientEmail)) {
                    showNotification('Please enter a valid recipient email', 'error');
                    isValid = false;
                } else if (!users[recipientEmail]) {
                    showNotification('Recipient not found', 'error');
                    isValid = false;
                } else if (recipientEmail === currentUser.email) {
                    showNotification('Cannot send to yourself', 'error');
                    isValid = false;
                } else {
                    description = `Internal transfer to ${recipientEmail}`;
                }
            } else if (currentWithdrawMethod === 'gcash') {
                const gcashNumber = document.getElementById('gcashWithdrawNumber').value.trim();
                if (!gcashNumber || !/^09\d{9}$/.test(gcashNumber)) {
                    showNotification('Please enter a valid GCash number (09xxxxxxxxx)', 'error');
                    isValid = false;
                } else {
                    description = 'Withdrawal to GCash';
                }
            } else if (currentWithdrawMethod === 'crypto') {
                const walletAddress = document.getElementById('cryptoWalletAddress').value.trim();
                if (!walletAddress || walletAddress.length < 20) {
                    showNotification('Please enter a valid wallet address', 'error');
                    isValid = false;
                } else {
                    description = 'Withdrawal to Crypto Wallet';
                }
            } else if (currentWithdrawMethod === 'bank') {
                const accountName = document.getElementById('bankAccountName').value.trim();
                const accountNumber = document.getElementById('bankAccountNumber').value.trim();
                const bankName = document.getElementById('bankName').value.trim();
                
                if (!accountName || !accountNumber || !bankName) {
                    showNotification('Please fill all bank details', 'error');
                    isValid = false;
                } else {
                    description = `Withdrawal to ${bankName} account`;
                }
            }
            
            if (!isValid) return;
            
            // Show loading state
            document.getElementById('withdrawBtnText').classList.add('hidden');
            document.getElementById('withdrawSpinner').classList.remove('hidden');
            document.getElementById('withdrawBtn').disabled = true;
            
            // Simulate processing delay
            setTimeout(() => {
                // Calculate amounts with 15% tax
                const tax = amount * 0.15;
                const receive = amount * 0.85;
                
                // Create withdrawal (this will deduct from daily earnings)
                addTransaction(-amount, description, 'pending');
                
                showNotification(`Withdrawal request for $${receive.toFixed(2)} (${formatPhp(usdToPhp(receive))}) (after tax) submitted! Processing may take up to 24 hours.`, 'success');
                
                // Auto-approve after 24 hours
                setTimeout(() => {
                    const transaction = user.transactions.find(t => 
                        t.description === description && t.status === 'pending');
                    
                    if (transaction) {
                        transaction.status = 'completed';
                        
                        // If internal transfer, add to recipient's daily earnings
                        if (currentWithdrawMethod === 'internal') {
                            const recipientEmail = document.getElementById('internalWalletEmail').value.trim();
                            if (users[recipientEmail]) {
                                users[recipientEmail].dailyEarnings = (users[recipientEmail].dailyEarnings || 0) + receive;
                                users[recipientEmail].transactions.unshift({
                                    id: Date.now(),
                                    amount: receive,
                                    description: `Internal transfer from ${currentUser.email}`,
                                    date: new Date().toISOString(),
                                    status: 'completed',
                                    type: 'credit'
                                });
                                
                                // Save recipient's data
                                saveUsersData();
                            }
                        }
                        
                        // Save user's data
                        saveUsersData();
                        
                        loadTransactionHistory();
                        updateWalletBalance();
                        
                        showNotification(`Withdrawal of $${receive.toFixed(2)} (${formatPhp(usdToPhp(receive))}) has been processed!`, 'success');
                    }
                }, 24 * 60 * 60 * 1000); // 24 hours in milliseconds
                
                // Clear amount
                amountInput.value = '';
                updateWithdrawalCalc();
                
                // Reset button state
                document.getElementById('withdrawBtnText').classList.remove('hidden');
                document.getElementById('withdrawSpinner').classList.add('hidden');
                document.getElementById('withdrawBtn').disabled = false;
            }, 1500);
        }
        
        // Update countdown timers
        function updateCountdown() {
            const countdowns = document.getElementsByClassName('countdown');
            for (let i = 0; i < countdowns.length; i++) {
                const endTime = parseInt(countdowns[i].dataset.endTime) || Date.now() + 30 * 86400 * 1000;
                const remaining = endTime - Date.now();
                countdowns[i].innerHTML = formatCountdown(remaining);
                
                // Check if investment has completed
                if (remaining <= 0 && !countdowns[i].classList.contains('completed')) {
                    countdowns[i].classList.add('completed');
                    
                    // Move investment to history after completion
                    setTimeout(() => {
                        if (currentUser && users[currentUser.email]) {
                            const user = users[currentUser.email];
                            const completedIndex = user.investments.findIndex(i => i.endDate === endTime);
                            
                            if (completedIndex !== -1) {
                                const completed = user.investments.splice(completedIndex, 1)[0];
                                completed.status = 'completed';
                                completed.returnAmount = completed.amount * 1.50; // 50% return
                                
                                if (!user.history) {
                                    user.history = [];
                                }
                                user.history.unshift(completed);
                                
                                // Add returns to daily earnings
                                addTransaction(completed.returnAmount, 'Investment Returns');
                                
                                loadUserInvestments();
                                updateStats();
                            }
                        }
                    }, 5000);
                }
            }
        }
        
        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationMsg = document.getElementById('notification-message');
            const icon = notification.querySelector('i');
            
            // Set message and type
            notificationMsg.textContent = message;
            notification.className = 'notification';
            
            // Set icon and color based on type
            if (type === 'error') {
                notification.classList.add('error');
                icon.className = 'fas fa-exclamation-circle';
            } else if (type === 'warning') {
                notification.classList.add('warning');
                icon.className = 'fas fa-exclamation-triangle';
            } else {
                icon.className = 'fas fa-check-circle';
            }
            
            // Show notification
            notification.classList.add('show');
            
            // Hide after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }
        
        // Copy text to clipboard
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent.trim();
            
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Copied to clipboard!', 'success');
            }).catch(err => {
                showNotification('Failed to copy text', 'error');
                console.error('Failed to copy text: ', err);
            });
        }
        
        // Update account settings
        function updateAccountSettings() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            const gcash = document.getElementById('settingsGCash').value.trim();
            const wallet = document.getElementById('settingsWallet').value.trim();
            
            // Validate GCash number
            if (gcash && !/^09\d{9}$/.test(gcash)) {
                showNotification('Please enter a valid GCash number (09xxxxxxxxx)', 'error');
                return;
            }
            
            // Validate wallet address
            if (wallet && wallet.length < 20) {
                showNotification('Please enter a valid wallet address', 'error');
                return;
            }
            
            // Update user data
            user.gcash = gcash;
            user.wallet = wallet;
            
            // Update current user data
            currentUser.gcash = gcash;
            currentUser.wallet = wallet;
            saveCurrentUser();
            saveUsersData();
            
            // Update display
            document.getElementById('userGCashNumber').textContent = gcash || 'Not set';
            document.getElementById('walletAddress').value = wallet || '';
            document.getElementById('gcashWithdrawNumber').value = gcash || '';
            
            showNotification('Account settings updated successfully!', 'success');
        }
        
        // Toggle two-factor authentication
        function toggleTwoFactor() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            const btn = document.getElementById('twoFactorBtn');
            const status = document.getElementById('twoFactorStatus');
            
            // Toggle status
            const newStatus = !user.settings.twoFactorEnabled;
            user.settings.twoFactorEnabled = newStatus;
            
            // Save updated data
            saveUsersData();
            
            // Update UI
            if (newStatus) {
                status.textContent = 'Enabled';
                status.classList.remove('disabled');
                status.classList.add('enabled');
                btn.textContent = 'Disable 2FA';
                btn.classList.remove('btn-secondary');
                btn.classList.add('btn-danger');
                showNotification('Two-factor authentication enabled', 'success');
            } else {
                status.textContent = 'Disabled';
                status.classList.remove('enabled');
                status.classList.add('disabled');
                btn.textContent = 'Enable 2FA';
                btn.classList.remove('btn-danger');
                btn.classList.add('btn-secondary');
                showNotification('Two-factor authentication disabled', 'warning');
            }
        }
        
        // Update two-factor authentication status display
        function updateTwoFactorStatus() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            const status = document.getElementById('twoFactorStatus');
            const btn = document.getElementById('twoFactorBtn');
            
            if (user.settings.twoFactorEnabled) {
                status.textContent = 'Enabled';
                status.classList.remove('disabled');
                status.classList.add('enabled');
                btn.textContent = 'Disable 2FA';
                btn.classList.remove('btn-secondary');
                btn.classList.add('btn-danger');
            } else {
                status.textContent = 'Disabled';
                status.classList.remove('enabled');
                status.classList.add('disabled');
                btn.textContent = 'Enable 2FA';
                btn.classList.remove('btn-danger');
                btn.classList.add('btn-secondary');
            }
        }
        
        // Change password
        function changePassword() {
            if (!currentUser) return;
            
            const user = users[currentUser.email];
            if (!user) return;
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;
            
            // Validate current password
            if (currentPassword !== user.password) {
                showNotification('Current password is incorrect', 'error');
                return;
            }
            
            // Validate new password
            if (newPassword.length < 8) {
                showNotification('New password must be at least 8 characters', 'error');
                return;
            }
            
            if (!/\d/.test(newPassword)) {
                showNotification('New password must contain at least 1 number', 'error');
                return;
            }
            
            if (newPassword !== confirmNewPassword) {
                showNotification('New passwords do not match', 'error');
                return;
            }
            
            // Update password
            user.password = newPassword;
            
            // Save updated data
            saveUsersData();
            
            // Clear form
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
            
            showNotification('Password changed successfully!', 'success');
        }
        
        // Run countdown updater every second
        setInterval(updateCountdown, 1000);
    </script>
</body>
</html>